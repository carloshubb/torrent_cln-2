import{b as e,r as s,o as r,g as t,j as a,C as o,k as l,u as i,K as n,l as d,t as c,v as u,z as m,A as p,N as g,q as f,F as b}from"./vendor-iYT8hLxN.js";import{b as y,h as v}from"./app-DX8Qg3i4.js";/* empty css            */const x={class:"min-h-screen flex items-center justify-center"},w={class:"max-w-md w-full space-y-8"},h={class:"rounded-md shadow-sm -space-y-px"},k={key:0,class:"text-red-500 text-sm mt-1"},S={key:0,class:"text-red-500 text-sm mt-1"},j={class:"flex items-center justify-between"},C={class:"flex items-center"},q=["disabled"],z={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},N={key:0,class:"mt-4"},R={__name:"Login",setup(R){const A=e({email:"",password:"",remember:!1}),E=e({}),F=s(!1),L=s(""),O=s("");r(()=>{}),y();const P=async()=>{F.value=!0,L.value="",O.value="";try{const e=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(!e)throw new Error("CSRF token not found. Please refresh the page.");const s=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":e,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(A),credentials:"include"}),r=await s.json();s.ok&&r.success?(L.value=r.message,O.value="success",localStorage.setItem("user",JSON.stringify(r.user)),window.location.href="/"):(r.errors&&(E.value=r.errors),L.value=r.message||"Login failed.",O.value="error")}catch(e){L.value=e.message||"Network error.",O.value="error"}finally{F.value=!1}};return(e,s)=>(a(),t(b,null,[o(i(v),{title:"Login as Member"}),l("div",x,[l("div",w,[s[8]||(s[8]=l("div",null,[l("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Sign in to your account ")],-1)),l("form",{onSubmit:n(P,["prevent"]),class:"mt-8 space-y-6"},[l("div",h,[l("div",null,[s[3]||(s[3]=l("label",{for:"email",class:"sr-only"},"Email address",-1)),c(l("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=e=>A.email=e),type:"email",required:"",class:m(["relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",{"border-red-500":E.email}]),placeholder:"Email address"},null,2),[[u,A.email]]),E.email?(a(),t("div",k,p(E.email[0]),1)):d("",!0)]),l("div",null,[s[4]||(s[4]=l("label",{for:"password",class:"sr-only"},"Password",-1)),c(l("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=e=>A.password=e),type:"password",required:"",class:m(["relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",{"border-red-500":E.password}]),placeholder:"Password"},null,2),[[u,A.password]]),E.password?(a(),t("div",S,p(E.password[0]),1)):d("",!0)])]),l("div",j,[l("div",C,[c(l("input",{id:"remember","onUpdate:modelValue":s[2]||(s[2]=e=>A.remember=e),type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[g,A.remember]]),s[5]||(s[5]=l("label",{for:"remember",class:"ml-2 block text-sm text-gray-900"}," Remember me ",-1))]),s[6]||(s[6]=l("div",{class:"text-sm"},[l("a",{href:"#",class:"font-medium text-indigo-600 hover:text-indigo-500"}," Forgot your password? ")],-1))]),l("div",null,[l("button",{type:"submit",disabled:F.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[F.value?(a(),t("span",z,s[7]||(s[7]=[l("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):d("",!0),f(" "+p(F.value?"Signing in...":"Sign in"),1)],8,q)]),L.value?(a(),t("div",N,[l("div",{class:m([{"bg-green-100 border border-green-400 text-green-700":"success"===O.value,"bg-red-100 border border-red-400 text-red-700":"error"===O.value},"px-4 py-3 rounded"])},p(L.value),3)])):d("",!0)],32)])])],64))}};export{R as default};
