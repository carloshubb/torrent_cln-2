import{s as b,r as p,i as x,y as w,c as d,o as u,d as h,a as e,u as k,h as S,z as _,k as c,f,g as y,m as g,t as m,A as C,b as N,F as V}from"./app-yU_wJiDk.js";/* empty css            */const M={class:"min-h-screen flex items-center justify-center"},T={class:"max-w-md w-full space-y-8"},j={class:"rounded-md shadow-sm -space-y-px"},z={key:0,class:"text-red-500 text-sm mt-1"},R={key:0,class:"text-red-500 text-sm mt-1"},q={class:"flex items-center justify-between"},E={class:"flex items-center"},F=["disabled"],L={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},A={key:0,class:"mt-4"},U={__name:"Login",setup(B){const o=b({email:"",password:"",remember:!1}),r=b({}),i=p(!1),a=p(""),l=p("");x(()=>{}),w();const v=async()=>{i.value=!0,a.value="",l.value="";try{const n=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(!n)throw new Error("CSRF token not found. Please refresh the page.");const s=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(this.form),credentials:"include"}),t=await s.json();s.ok&&t.success?(a.value=t.message,l.value="success",localStorage.setItem("user",JSON.stringify(t.user)),window.location.href="/"):(t.errors&&(r.value=t.errors),a.value=t.message||"Login failed.",l.value="error")}catch(n){a.value=n.message||"Network error.",l.value="error"}finally{i.value=!1}};return(n,s)=>(u(),d(V,null,[h(k(S),{title:"Login as Member"}),e("div",M,[e("div",T,[s[8]||(s[8]=e("div",null,[e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Sign in to your account ")],-1)),e("form",{onSubmit:_(v,["prevent"]),class:"mt-8 space-y-6"},[e("div",j,[e("div",null,[s[3]||(s[3]=e("label",{for:"email",class:"sr-only"},"Email address",-1)),f(e("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=t=>o.email=t),type:"email",required:"",class:g(["relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",{"border-red-500":r.email}]),placeholder:"Email address"},null,2),[[y,o.email]]),r.email?(u(),d("div",z,m(r.email[0]),1)):c("",!0)]),e("div",null,[s[4]||(s[4]=e("label",{for:"password",class:"sr-only"},"Password",-1)),f(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=t=>o.password=t),type:"password",required:"",class:g(["relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",{"border-red-500":r.password}]),placeholder:"Password"},null,2),[[y,o.password]]),r.password?(u(),d("div",R,m(r.password[0]),1)):c("",!0)])]),e("div",q,[e("div",E,[f(e("input",{id:"remember","onUpdate:modelValue":s[2]||(s[2]=t=>o.remember=t),type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[C,o.remember]]),s[5]||(s[5]=e("label",{for:"remember",class:"ml-2 block text-sm text-gray-900"}," Remember me ",-1))]),s[6]||(s[6]=e("div",{class:"text-sm"},[e("a",{href:"#",class:"font-medium text-indigo-600 hover:text-indigo-500"}," Forgot your password? ")],-1))]),e("div",null,[e("button",{type:"submit",disabled:i.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[i.value?(u(),d("span",L,s[7]||(s[7]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):c("",!0),N(" "+m(i.value?"Signing in...":"Sign in"),1)],8,F)]),a.value?(u(),d("div",A,[e("div",{class:g([{"bg-green-100 border border-green-400 text-green-700":l.value==="success","bg-red-100 border border-red-400 text-red-700":l.value==="error"},"px-4 py-3 rounded"])},m(a.value),3)])):c("",!0)],32)])])],64))}};export{U as default};
