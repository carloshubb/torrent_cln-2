import{_ as p,c as n,o as l,a as s,x as y,i as d,g as m,h as f,k as c,t as a,y as b,b as x,z as h,m as w}from"./app-DpHJp1cN.js";/* empty css            */const v={name:"LoginComponent",data(){return{form:{email:"",password:"",remember:!1},errors:{},loading:!1,message:"",messageType:""}},setup(i,{expose:e}){h();const o=async()=>{try{(await fetch("/me",{method:"GET",credentials:"include"})).ok&&(window.location.href="/")}catch{}};w(()=>{o()}),e({checkAuth:o})},methods:{async handleLogin(){this.loading=!0,this.errors={},this.message="";try{const i=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(!i)throw new Error("CSRF token not found. Please refresh the page.");const e=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":i,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(this.form),credentials:"include"}),o=await e.json();e.ok&&o.success?(this.message=o.message,this.messageType="success",localStorage.setItem("user",JSON.stringify(o.user)),window.location.href="/"):(o.errors&&(this.errors=o.errors),this.message=o.message||"Login failed.",this.messageType="error")}catch(i){this.message=i.message||"Network error.",this.messageType="error"}finally{this.loading=!1}}}},k={class:"min-h-screen flex items-center justify-center"},T={class:"max-w-md w-full space-y-8"},S={class:"rounded-md shadow-sm -space-y-px"},C={key:0,class:"text-red-500 text-sm mt-1"},_={key:0,class:"text-red-500 text-sm mt-1"},L={class:"flex items-center justify-between"},N={class:"flex items-center"},V=["disabled"],j={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},z={key:0,class:"mt-4"};function E(i,e,o,u,r,g){return l(),n("div",k,[s("div",T,[e[9]||(e[9]=s("div",null,[s("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Sign in to your account ")],-1)),s("form",{onSubmit:e[3]||(e[3]=y((...t)=>g.handleLogin&&g.handleLogin(...t),["prevent"])),class:"mt-8 space-y-6"},[s("div",S,[s("div",null,[e[4]||(e[4]=s("label",{for:"email",class:"sr-only"},"Email address",-1)),m(s("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=t=>r.form.email=t),type:"email",required:"",class:c(["relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",{"border-red-500":r.errors.email}]),placeholder:"Email address"},null,2),[[f,r.form.email]]),r.errors.email?(l(),n("div",C,a(r.errors.email[0]),1)):d("",!0)]),s("div",null,[e[5]||(e[5]=s("label",{for:"password",class:"sr-only"},"Password",-1)),m(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=t=>r.form.password=t),type:"password",required:"",class:c(["relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",{"border-red-500":r.errors.password}]),placeholder:"Password"},null,2),[[f,r.form.password]]),r.errors.password?(l(),n("div",_,a(r.errors.password[0]),1)):d("",!0)])]),s("div",L,[s("div",N,[m(s("input",{id:"remember","onUpdate:modelValue":e[2]||(e[2]=t=>r.form.remember=t),type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[b,r.form.remember]]),e[6]||(e[6]=s("label",{for:"remember",class:"ml-2 block text-sm text-gray-900"}," Remember me ",-1))]),e[7]||(e[7]=s("div",{class:"text-sm"},[s("a",{href:"#",class:"font-medium text-indigo-600 hover:text-indigo-500"}," Forgot your password? ")],-1))]),s("div",null,[s("button",{type:"submit",disabled:r.loading,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[r.loading?(l(),n("span",j,e[8]||(e[8]=[s("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):d("",!0),x(" "+a(r.loading?"Signing in...":"Sign in"),1)],8,V)]),r.message?(l(),n("div",z,[s("div",{class:c([{"bg-green-100 border border-green-400 text-green-700":r.messageType==="success","bg-red-100 border border-red-400 text-red-700":r.messageType==="error"},"px-4 py-3 rounded"])},a(r.message),3)])):d("",!0)],32)])])}const q=p(v,[["render",E]]);export{q as default};
